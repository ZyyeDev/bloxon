[gd_scene load_steps=7 format=3 uid="uid://dktoqf6a4q15i"]

[ext_resource type="Script" uid="uid://c8wupqrso6nx1" path="res://scripts/index_thing.gd" id="1_tmkkw"]
[ext_resource type="Texture2D" uid="uid://dhn2xdg68sda7" path="res://icon.svg" id="2_roh2c"]
[ext_resource type="FontFile" uid="uid://c7eu4ftsr4c8u" path="res://assets/fonts/ComicNeue-Angular-Bold.ttf" id="3_6cjws"]

[sub_resource type="GDScript" id="GDScript_hgkl1"]
script/source = "@tool
extends Sprite2D
class_name handSprSize

@export var DESIRED_SIZE := Vector2(20, 20)

func _process(delta) -> void:
	if texture:
		var tex_size = texture.get_size()
		scale = DESIRED_SIZE / tex_size
"

[sub_resource type="Theme" id="Theme_fxfs2"]
default_font = ExtResource("3_6cjws")

[sub_resource type="GDScript" id="GDScript_4xuo1"]
script/source = "@tool
class_name AutoSizeLabel extends Label

@export var max_font_size = 56
@export var min_font_size = 8

var _cached_text: String = \"\"
var _cached_size: Vector2 = Vector2.ZERO
var _is_updating: bool = false

func _ready() -> void:
	clip_text = true
	item_rect_changed.connect(_on_item_rect_changed)
	_cached_text = text
	_cached_size = size
	call_deferred(\"update_font_size\")

func _set(property: StringName, value: Variant) -> bool:
	if property == \"text\":
		if value != _cached_text:
			_cached_text = value
			call_deferred(\"update_font_size\")
	return false

func update_font_size() -> void:
	if _is_updating or size.x <= 0:
		return
	
	_is_updating = true
	
	var font = get_theme_font(\"font\")
	if not font:
		_is_updating = false
		return
	
	var target_size = max_font_size
	var line = TextLine.new()
	line.direction = text_direction
	line.flags = justification_flags
	line.alignment = horizontal_alignment
	
	var low = min_font_size
	var high = max_font_size
	
	while low <= high:
		var mid = int((low + high) / 2)
		line.clear()
		
		if not line.add_string(text, font, mid):
			high = mid - 1
			continue
		
		var text_width = line.get_line_width()
		
		if text_width <= size.x:
			target_size = mid
			low = mid + 1
		else:
			high = mid - 1
	
	add_theme_font_size_override(\"font_size\", target_size)
	_is_updating = false

func _on_item_rect_changed() -> void:
	if size != _cached_size:
		_cached_size = size
		call_deferred(\"update_font_size\")
"

[node name="indexThing" type="Panel"]
custom_minimum_size = Vector2(126, 126)
offset_right = 126.0
offset_bottom = 126.0
script = ExtResource("1_tmkkw")

[node name="Icon" type="Sprite2D" parent="."]
position = Vector2(63, 65)
scale = Vector2(0.859375, 0.859375)
texture = ExtResource("2_roh2c")
script = SubResource("GDScript_hgkl1")
DESIRED_SIZE = Vector2(110, 110)

[node name="Name" type="Label" parent="."]
layout_mode = 0
offset_left = 5.0
offset_top = 3.0
offset_right = 120.0
offset_bottom = 37.0
theme = SubResource("Theme_fxfs2")
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 26
text = "lirilì larilà"
horizontal_alignment = 1
clip_text = true
script = SubResource("GDScript_4xuo1")
max_font_size = 40

[node name="Amount" type="Label" parent="."]
layout_mode = 0
offset_left = 50.0
offset_top = 91.0
offset_right = 113.0
offset_bottom = 116.0
theme = SubResource("Theme_fxfs2")
theme_override_colors/font_color = Color(0, 1, 0, 1)
theme_override_colors/font_shadow_color = Color(0, 0, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 20
text = "Rare"
horizontal_alignment = 1
clip_text = true
script = SubResource("GDScript_4xuo1")
max_font_size = 20
